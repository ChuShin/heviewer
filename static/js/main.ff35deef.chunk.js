(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(t,e,a){t.exports=a(42)},42:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),l=a(10),c=a.n(l),o=(a(6),a(3)),i=(a(8),a(54)),s=a(50),u=a(51),f=a(56),p=a(52),m=a(5),v=a(53),d=a(55),y=a(11),g=a(12),h=20,b=20,E=20,k=1500-E-b,x=400-h-50,O=5e6;function j(t,e,a,n){var r=["#FF2400","#E56717","#FDD017","#5FFB17","#4EE2EC","#0041C2","#E3319D","#9C67CA","#452E5A"],l=(a-t)/e,c=(n-t)/e;return l<=-2&&c<=-2?r[0]:l<-2&&c>-2&&c<2?r[1]:l<=-2&&c>=2?r[2]:l>-2&&l<2&&c<-2?r[3]:l>-2&&l<2&&c>-2&&c<2?r[4]:l>-2&&l<2&&c>2?r[5]:l<=-2&&c>=2?r[6]:l<-2&&c>-2&&c<2?r[7]:l>2&&c>2?r[8]:void 0}function C(t){t.setAttribute("xlink","http://www.w3.org/1999/xlink");var e=(new XMLSerializer).serializeToString(t);return e=(e=e.replace(/(\w+)?:?xlink=/g,"xmlns:xlink=")).replace(/NS\d+:href/g,"xlink:href")}function w(t,e){try{new Blob}catch(n){alert("blob not supported")}var a=new Blob([t],{type:"image/svg+xml"});Object(y.saveAs)(a,e)}var A=function(t){var e=t.data,a=Object(n.useRef)(null),l=Object(n.useRef)(null),c=Object(n.useState)(null),i=Object(o.a)(c,2),y=i[0],A=i[1],S=Object(n.useState)(null),F=(Object(o.a)(S,2)[1],Object(n.useState)("400")),B=Object(o.a)(F,2),_=B[0],N=B[1];return Object(n.useEffect)(function(){if(e&&a.current){var t=function(t,e){var a=t.key;A(a),function(t,e,a,n,r){var l=Object(p.a)(t.current);l.selectAll("*").remove();var c=r.key;r.values.forEach(function(t,r){var o=t.values.map(function(t){return[t.covA,t.pos]}),i=t.values.map(function(t){return[-1*t.covB,t.pos]}),s=a[c].mean,u=e(n[t.key].offset)+100,f=Object(v.a)().domain([-3*s,3*s]).range([-60,60]),p=Object(v.a)().domain([0,7e7]).range([0,x]),m=Object(d.a)().scale(p).ticks(6).tickFormat(function(t,e){return t/1e6});l.append("g").attr("transform","translate(50, 20)").style("font","12px helvetica").call(m),l.append("g").attr("transform","translate(50, 20)").selectAll("dot").data(o).enter().append("circle").attr("cx",function(t){return u+f(t[0])}).attr("cy",function(t){return p(t[1])}).attr("r",1.5).style("fill",function(t){return t[0]>80?"#69b3a2":t[0]<10?"#9933a2":"#808080"}),l.append("g").attr("transform","translate(50, 20)").selectAll("dot").data(i).enter().append("circle").attr("cx",function(t){return u+f(t[0])}).attr("cy",function(t){return p(t[1])}).attr("r",1.5).style("fill",function(t){return t[0]<-80?"#9933a2":t[0]>-10?"#69b3a2":"#808080"}),l.append("line").attr("transform","translate(50, 20)").attr("x1",u).attr("y1",p(0)).attr("x2",u).attr("y2",p(n[t.key].chrSize)).style("stroke","black").style("stroke-width",2),l.append("line").attr("transform","translate(50, 20)").attr("x1",u+f(s)).attr("y1",p(0)).attr("x2",u+f(s)).attr("y2",p(n[t.key].chrSize)).style("stroke","#9933a2").style("stroke-width",2),l.append("line").attr("transform","translate(50, 20)").attr("x1",u-f(s)).attr("y1",p(0)).attr("x2",u-f(s)).attr("y2",p(n[t.key].chrSize)).style("stroke","#69b3a2").style("stroke-width",2)})}(l,c,r,n,t);var o=i.selectAll(".sampleBtn");o.style("fill","#525252"),o.filter(function(t,a){return a===e}).style("fill","blue")},n=function(t){var e,a=Object(m.a)().key(function(t){return t.group}).entries(t),n=0,r={};for(e=0;e<a.length;e++){var l=Object(s.a)(a[e].values.map(function(t){return t.pos}));r[a[e].key]={name:a[e].key,chrSize:l,offset:n},n+=l+O}return r.map_size=n,r}(e),r=function(t){var e,a=Object(m.a)().key(function(t){return t.sample}).entries(t),n={};for(e=0;e<a.length;e++)n[a[e].key]={name:a[e].key,mean:Object(u.a)(a[e].values.map(function(t){return t.covA+t.covB}))/2,sd:Object(f.a)(a[e].values.map(function(t){return t.covA}))/2};return n}(e);console.log(n),console.log(r);var c=Object(v.a)().domain([0,n.map_size]).range([0,k-b]),o=Object(v.a)().domain([0,300]).range([0,x]),i=Object(p.a)(a.current);i=i.append("g").attr("transform","translate(".concat(E,", ").concat(h,")"));var y=Object(m.a)().key(function(t){return t.sample}).key(function(t){return t.group}).entries(e),S=g.size(y);for(var F in N(22*(S+1)),n)n[F].hasOwnProperty("offset")&&i.attr("transform","translate(0,0)").append("text").attr("class","xLabel").attr("x",c(n[F].offset)+150).attr("y",15).attr("text-anchor","middle").text(F).style("font","16px helvetica").style("font-weight","bold").style("fill","rgb(0, 65, 194)");y.forEach(function(e,a){var l=e.key,s=e.values,u=o("".concat(h+20*a));i.append("g").append("rect").attr("class","sampleBtn").attr("rx",4).attr("ry",4).attr("x",c(0)).attr("y",u).attr("width",70).attr("height",20),i.append("text").attr("class","y label").attr("x",5).attr("y",u+o(20)-8).text(l).style("font","10px helvetica").style("fill","white").on("click",function(){t(e,a)}),s.forEach(function(t,e){var a=t.values.map(function(t){return[t.pos,j(r[l].mean,r[l].sd,t.covA,t.covB)]}),o=c(n[t.key].offset);i.append("g").attr("transform","translate(80,0)").append("rect").attr("rx",2).attr("ry",2).attr("x",o).attr("y",u).attr("width",c(n[t.key].chrSize)).attr("height",20).style("fill","#FF2400AF").style("fill-opacity",.1),i.append("g").attr("transform","translate(80,0)").selectAll("line").data(a).enter().append("line").attr("class",t.key).style("stroke",function(t){return t[1]}).attr("chrGroup",t.key).attr("value",function(t){return t[0]}).attr("x1",function(t){return o+c(t[0])}).attr("y1",function(t){return u}).attr("x2",function(t){return o+c(t[0])}).attr("y2",function(t){return u+20})})}),t(y[0],0),Object(p.a)("#saveHeatMap").on("click",function(){w('<svg height="500" width="1000">'+C(i.node())+"</svg>","heatmap.svg")}),Object(p.a)("#saveScatter").on("click",function(){w('<svg height="500" width="1000">'+C(Object(p.a)(l.current).node())+"</svg>","scatterplot.svg")})}},[e]),r.a.createElement("div",null,r.a.createElement("div",{className:"actionPanel"},r.a.createElement("select",{className:"chrChooser"},r.a.createElement("option",{selected:!0},"All"),r.a.createElement("option",null,"C_C1"),r.a.createElement("option",null,"C_C2"),r.a.createElement("option",null,"C_C3"),r.a.createElement("option",null,"C_C4"),r.a.createElement("option",null,"C_C5"),r.a.createElement("option",null,"C_C6"),r.a.createElement("option",null,"C_C7"),r.a.createElement("option",null,"C_C8"),r.a.createElement("option",null,"C_C9")),r.a.createElement("button",{className:"saveBtn",id:"saveHeatMap"},"Export Heatmap"),r.a.createElement("button",{className:"saveBtn",id:"saveScatter"},"Export ScatterPlot")),r.a.createElement("div",{className:"ggContainer"},r.a.createElement("svg",{className:"GGLinear",width:k+E+b,height:_,ref:a})),r.a.createElement("h3",null,y),r.a.createElement("div",{className:"ggContainer"},r.a.createElement("svg",{className:"GGDot",width:k+E+b,height:"400",ref:l})))};function S(t){return{sample:t.sample,group:t.group,pos:+t.pos,covA:parseFloat(t.covA),covB:parseFloat(t.covB)}}var F=function(){var t=Object(n.useState)(null),e=Object(o.a)(t,2),a=e[0],l=e[1];return Object(n.useEffect)(function(){document.getElementById("file_input").addEventListener("change",function(t){var e=t.target.files[0],a=new FileReader;a.onload=function(t){Object(i.a)(t.target.result,S).then(function(t){l(t)})},a.readAsDataURL(e)},!1)},[]),r.a.createElement("div",null,r.a.createElement("input",{type:"file",id:"file_input",accept:".csv"}),r.a.createElement(A,{data:a}))},B=function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"header"},"heviewer"),r.a.createElement("div",{className:"heContainer"},r.a.createElement(F,null)))},_=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,57)).then(function(e){var a=e.getCLS,n=e.getFID,r=e.getFCP,l=e.getLCP,c=e.getTTFB;a(t),n(t),r(t),l(t),c(t)})};c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(B,null)),document.getElementById("root")),_()},6:function(t,e,a){}},[[14,1,2]]]);
//# sourceMappingURL=main.ff35deef.chunk.js.map