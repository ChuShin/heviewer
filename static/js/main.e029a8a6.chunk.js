(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{26:function(t,e,a){},62:function(t,e,a){t.exports=a(90)},90:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),c=a(39),l=a.n(c),o=(a(26),a(17)),s=(a(35),a(95)),i=a(92),u=a(93),f=a(98),p=a(36),d=a(23),v=a(94),m=a(97),y=a(14),g=a(43),b=a(41),h=a(42),x=20,k=20,E=20,O=1500-E-k,j=400-x-50,w=5e6,A=20;function S(t,e,a,n){var r=["#FF2400","#E56717","#FDD017","#5FFB17","#4EE2EC","#0041C2","#E3319D","#9C67CA","#452E5A"],c=(a-t)/e,l=(n-t)/e;return c<=-2&&l<=-2?r[0]:c<-2&&l>-2&&l<2?r[1]:c<=-2&&l>=2?r[2]:c>-2&&c<2&&l<-2?r[3]:c>-2&&c<2&&l>-2&&l<2?r[4]:c>-2&&c<2&&l>2?r[5]:c<=-2&&l>=2?r[6]:c<-2&&l>-2&&l<2?r[7]:c>2&&l>2?r[8]:void 0}function F(t){t.setAttribute("xlink","http://www.w3.org/1999/xlink");var e=(new XMLSerializer).serializeToString(t);return e=(e=e.replace(/(\w+)?:?xlink=/g,"xmlns:xlink=")).replace(/NS\d+:href/g,"xlink:href")}function B(t,e){try{new Blob}catch(n){alert("blob not supported")}var a=new Blob([t],{type:"image/svg+xml"});Object(b.saveAs)(a,e)}function z(t,e,a){var n=Object(v.a)().domain([0,e.map_size]).range([0,a]),r="";for(var c in e)if(e[c].hasOwnProperty("offset"))if(e[c].offset>0){var l=(e[r].offset+e[c].offset)/2;t.attr("transform","translate(80,0)").append("text").attr("class","xLabel").attr("x",n(l)).attr("y",15).attr("text-anchor","middle").text(r).style("font","16px helvetica").style("font-weight","bold").style("fill","rgb(0, 65, 194)"),r=c}else r=c;var o=e[r].offset+e[r].chrSize/2;console.log(r+o),t.attr("transform","translate(80,0)").append("text").attr("class","xLabel").attr("x",n(o)).attr("y",15).attr("text-anchor","middle").text(r).style("font","16px helvetica").style("font-weight","bold").style("fill","rgb(0, 65, 194)")}var C=function(t){var e=t.data,a=Object(n.useRef)(null),c=Object(n.useRef)(null),l=Object(n.useState)(null),s=Object(o.a)(l,2),b=s[0],C=s[1],N=Object(n.useState)(null),L=(Object(o.a)(N,2)[1],Object(n.useState)("400")),D=Object(o.a)(L,2),G=D[0],P=D[1];return Object(n.useEffect)(function(){if(e&&a.current){var t=function(t,e){var a=t.key;C(a),function(t,e,a,n,r){var c=Object(p.a)(t.current);c.selectAll("*").remove();var l=r.key;r.values.forEach(function(t,r){var o=t.values.map(function(t){return[t.covA,t.pos]}),s=t.values.map(function(t){return[-1*t.covB,t.pos]}),i=a[l].mean,u=e(n[t.key].offset)+100,f=Object(v.a)().domain([-3*i,3*i]).range([-40,40]),p=Object(v.a)().domain([0,7e7]).range([0,j]),d=Object(m.a)().scale(p).ticks(6).tickFormat(function(t,e){return t/1e6});c.append("g").attr("transform","translate(50, 20)").style("font","12px helvetica").call(d),c.append("g").attr("transform","translate(50, 20)").selectAll("dot").data(o).enter().append("circle").attr("cx",function(t){return u+f(t[0])}).attr("cy",function(t){return p(t[1])}).attr("r",1.5).style("fill","#808080"),c.append("g").attr("transform","translate(50, 20)").selectAll("dot").data(s).enter().append("circle").attr("cx",function(t){return u+f(t[0])}).attr("cy",function(t){return p(t[1])}).attr("r",1.5).style("fill","#808080"),c.append("line").attr("transform","translate(50, 20)").attr("x1",u).attr("y1",p(0)).attr("x2",u).attr("y2",p(n[t.key].chrSize)).style("stroke","black").style("stroke-width",2),c.append("line").attr("transform","translate(50, 20)").attr("x1",u+f(i)).attr("y1",p(0)).attr("x2",u+f(i)).attr("y2",p(n[t.key].chrSize)).style("stroke","#9933a2").style("stroke-width",2),c.append("line").attr("transform","translate(50, 20)").attr("x1",u-f(i)).attr("y1",p(0)).attr("x2",u-f(i)).attr("y2",p(n[t.key].chrSize)).style("stroke","#69b3a2").style("stroke-width",2)})}(c,l,r,n,t);var o=s.selectAll(".sampleBtn");o.style("fill","#525252"),o.filter(function(t,a){return a===e}).style("fill","blue")},n=function(t){var e,a=Object(d.a)().key(function(t){return t.group}).entries(t),n=0,r={};for(e=0;e<a.length;e++){var c=Object(i.a)(a[e].values.map(function(t){return t.pos}));r[a[e].key]={name:a[e].key,chrSize:c,offset:n},n+=c+w}return r.map_size=n,r}(e),r=function(t){var e,a=Object(d.a)().key(function(t){return t.sample}).entries(t),n={};for(e=0;e<a.length;e++)n[a[e].key]={name:a[e].key,mean:Object(u.a)(a[e].values.map(function(t){return t.covA+t.covB}))/2,sd:Object(f.a)(a[e].values.map(function(t){return t.covA}))/2};return n}(e);console.log(n),console.log(r);var l=Object(v.a)().domain([0,n.map_size]).range([0,O-k]),o=Object(v.a)().domain([0,300]).range([0,j]),s=Object(p.a)(a.current);s.selectAll("*").remove(),s=s.append("g").attr("transform","translate(".concat(E,", ").concat(x,")"));var b=Object(d.a)().key(function(t){return t.sample}).key(function(t){return t.group}).entries(e),N=h.size(b);P(22*(N+2));var L=s.append("g");z(L,n,O-k);var D=s.append("g"),G=Object(y.a)().scaleExtent([5,5]).on("zoom",function(t){var e=t.transform;D.attr("transform",e)}),_=0;D.on("dblclick",function(t){Object(y.c)(D.node());var e=Object(g.a)(t)[0],a="";0==_?(a=e<210?-300:e>1280?-6e3:O/2-5*e,D.transition().duration(750).attr("transform","translate("+a+",0) scale(5,1)"),L.remove(),z(L=s.append("g"),n,5*O),L.transition().duration(750).attr("transform","translate("+a+",0)"),_=1):(D.transition().duration(750).call(G.transform,y.b),L.remove(),z(L=s.append("g"),n,O),_=0)}),b.forEach(function(e,a){var c=e.key,i=e.values,u=o("".concat(x+A*a));s.append("g").append("rect").attr("class","sampleBtn").attr("rx",4).attr("ry",4).attr("x",l(0)).attr("y",u).attr("width",70).attr("height",A),s.append("text").attr("class","y label").attr("x",5).attr("y",u+o(A)-8).text(c).style("font","10px helvetica").style("fill","white").on("click",function(){t(e,a)}),function(t,e,a,n,r,c,l){var o=t.append("g");a.forEach(function(t,a){var s=t.values.map(function(t){return[t.pos,S(n[e].mean,n[e].sd,t.covA,t.covB)]}),i=c(r[t.key].offset);o.append("g").attr("transform","translate(80,0)").append("rect").attr("rx",2).attr("ry",2).attr("x",i).attr("y",l).attr("width",c(r[t.key].chrSize)).attr("height",A).style("fill","#FF2400AF").style("fill-opacity",.1),o.append("g").attr("transform","translate(80,0)").selectAll("line").data(s).enter().append("line").attr("class",t.key).style("stroke",function(t){return t[1]}).attr("chrGroup",t.key).attr("value",function(t){return t[0]}).attr("x1",function(t){return i+c(t[0])}).attr("y1",function(t){return l}).attr("x2",function(t){return i+c(t[0])}).attr("y2",function(t){return l+A})})}(D,c,i,r,n,l,u)}),t(b[0],0),Object(p.a)("#saveHeatMap").on("click",function(){B('<svg height="500" width="1000">'+F(s.node())+"</svg>","heatmap.svg")}),Object(p.a)("#saveScatter").on("click",function(){B('<svg height="500" width="1000">'+F(Object(p.a)(c.current).node())+"</svg>","scatterplot.svg")})}},[e]),r.a.createElement("div",null,r.a.createElement("div",{className:"actionPanel"},r.a.createElement("button",{className:"saveBtn",id:"saveHeatMap"},"Export Heatmap"),r.a.createElement("button",{className:"saveBtn",id:"saveScatter"},"Export ScatterPlot")),r.a.createElement("div",{className:"ggContainer"},r.a.createElement("svg",{className:"GGLinear",width:O+E+k,height:G,ref:a})),r.a.createElement("h3",null,b),r.a.createElement("div",{className:"ggContainer"},r.a.createElement("svg",{className:"GGDot",width:O+E+k,height:"400",ref:c})))};function N(t){return{sample:t.sample,group:t.group,pos:+t.pos,covA:parseFloat(t.covA),covB:parseFloat(t.covB)}}var L=function(){var t=Object(n.useState)(null),e=Object(o.a)(t,2),a=e[0],c=e[1];return Object(n.useEffect)(function(){document.getElementById("file_input").addEventListener("change",function(t){var e=t.target.files[0],a=new FileReader;a.onload=function(t){Object(s.a)(t.target.result,N).then(function(t){c(t)})},a.readAsDataURL(e)},!1)},[]),r.a.createElement("div",null,r.a.createElement("input",{type:"file",id:"file_input",accept:".csv"}),r.a.createElement(C,{data:a}))},D=function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"header"},"HExviewer"),r.a.createElement("div",{className:"heContainer"},r.a.createElement(L,null)))},G=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,101)).then(function(e){var a=e.getCLS,n=e.getFID,r=e.getFCP,c=e.getLCP,l=e.getTTFB;a(t),n(t),r(t),c(t),l(t)})};l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(D,null)),document.getElementById("root")),G()}},[[62,1,2]]]);
//# sourceMappingURL=main.e029a8a6.chunk.js.map