(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(t,e,a){t.exports=a(42)},42:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),c=a(10),l=a.n(c),o=(a(6),a(3)),s=(a(8),a(54)),i=a(50),u=a(51),f=a(56),p=a(52),v=a(5),d=a(53),m=a(55),y=a(11),g=a(12),h=20,b=20,k=20,x=1600-k-b,E=400-h-50,O=5e6;function j(t,e,a,n){var r=["#FF2400","#E56717","#FDD017","#5FFB17","#4EE2EC","#0041C2","#E3319D","#9C67CA","#452E5A"],c=(a-t)/e,l=(n-t)/e;return c<=-2&&l<=-2?r[0]:c<-2&&l>-2&&l<2?r[1]:c<=-2&&l>=2?r[2]:c>-2&&c<2&&l<-2?r[3]:c>-2&&c<2&&l>-2&&l<2?r[4]:c>-2&&c<2&&l>2?r[5]:c<=-2&&l>=2?r[6]:c<-2&&l>-2&&l<2?r[7]:c>2&&l>2?r[8]:void 0}function w(t){t.setAttribute("xlink","http://www.w3.org/1999/xlink");var e=(new XMLSerializer).serializeToString(t);return e=(e=e.replace(/(\w+)?:?xlink=/g,"xmlns:xlink=")).replace(/NS\d+:href/g,"xlink:href")}function A(t,e){try{new Blob}catch(n){alert("blob not supported")}var a=new Blob([t],{type:"image/svg+xml"});Object(y.saveAs)(a,e)}var S=function(t){var e=t.data,a=Object(n.useRef)(null),c=Object(n.useRef)(null),l=Object(n.useState)(null),s=Object(o.a)(l,2),y=s[0],S=s[1],F=Object(n.useState)(null),B=(Object(o.a)(F,2)[1],Object(n.useState)("400")),z=Object(o.a)(B,2),C=z[0],N=z[1];return Object(n.useEffect)(function(){if(e&&a.current){var t=function(t,e){var a=t.key;S(a),function(t,e,a,n,r){var c=Object(p.a)(t.current);c.selectAll("*").remove();var l=r.key;r.values.forEach(function(t,r){var o=t.values.map(function(t){return[t.covA,t.pos]}),s=t.values.map(function(t){return[-1*t.covB,t.pos]}),i=a[l].mean,u=e(n[t.key].offset)+100,f=Object(d.a)().domain([-3*i,3*i]).range([-60,60]),p=Object(d.a)().domain([0,7e7]).range([0,E]),v=Object(m.a)().scale(p).ticks(6).tickFormat(function(t,e){return t/1e6});c.append("g").attr("transform","translate(50, 20)").style("font","12px helvetica").call(v),c.append("g").attr("transform","translate(50, 20)").selectAll("dot").data(o).enter().append("circle").attr("cx",function(t){return u+f(t[0])}).attr("cy",function(t){return p(t[1])}).attr("r",1.5).style("fill",function(t){return t[0]>80?"#69b3a2":t[0]<10?"#9933a2":"#808080"}),c.append("g").attr("transform","translate(50, 20)").selectAll("dot").data(s).enter().append("circle").attr("cx",function(t){return u+f(t[0])}).attr("cy",function(t){return p(t[1])}).attr("r",1.5).style("fill",function(t){return t[0]<-80?"#9933a2":t[0]>-10?"#69b3a2":"#808080"}),c.append("line").attr("transform","translate(50, 20)").attr("x1",u).attr("y1",p(0)).attr("x2",u).attr("y2",p(n[t.key].chrSize)).style("stroke","black").style("stroke-width",2),c.append("line").attr("transform","translate(50, 20)").attr("x1",u+f(i)).attr("y1",p(0)).attr("x2",u+f(i)).attr("y2",p(n[t.key].chrSize)).style("stroke","#9933a2").style("stroke-width",2),c.append("line").attr("transform","translate(50, 20)").attr("x1",u-f(i)).attr("y1",p(0)).attr("x2",u-f(i)).attr("y2",p(n[t.key].chrSize)).style("stroke","#69b3a2").style("stroke-width",2)})}(c,l,r,n,t);var o=s.selectAll(".sampleBtn");o.style("fill","#525252"),o.filter(function(t,a){return a===e}).style("fill","blue")},n=function(t){var e,a=Object(v.a)().key(function(t){return t.group}).entries(t),n=0,r={};for(e=0;e<a.length;e++){var c=Object(i.a)(a[e].values.map(function(t){return t.pos}));r[a[e].key]={name:a[e].key,chrSize:c,offset:n},n+=c+O}return r.map_size=n,r}(e),r=function(t){var e,a=Object(v.a)().key(function(t){return t.sample}).entries(t),n={};for(e=0;e<a.length;e++)n[a[e].key]={name:a[e].key,mean:Object(u.a)(a[e].values.map(function(t){return t.covA+t.covB}))/2,sd:Object(f.a)(a[e].values.map(function(t){return t.covA}))/2};return n}(e);console.log(n),console.log(r);var l=Object(d.a)().domain([0,n.map_size]).range([0,x-b]),o=Object(d.a)().domain([0,300]).range([0,E]),s=Object(p.a)(a.current);s=s.append("g").attr("transform","translate(".concat(k,", ").concat(h,")"));var y=Object(v.a)().key(function(t){return t.sample}).key(function(t){return t.group}).entries(e),F=g.size(y);for(var B in N(22*(F+1)),n)n[B].hasOwnProperty("offset")&&s.attr("transform","translate(50,0)").append("text").attr("class","xLabel").attr("x",l(n[B].offset)+100).attr("y",20).attr("text-anchor","middle").text(B).style("font","16px helvetica");y.forEach(function(e,a){var c=e.key,i=e.values,u=o("".concat(h+20*a));s.append("g").append("rect").attr("class","sampleBtn").attr("rx",4).attr("ry",4).attr("x",l(0)).attr("y",u).attr("width",40).attr("height",20),s.append("text").attr("class","y label").attr("x",20).attr("y",u+o(20)-4).attr("text-anchor","middle").text(c).style("font","14px helvetica").style("fill","white").on("click",function(){t(e,a)}),i.forEach(function(t,e){var a=t.values.map(function(t){return[t.pos,j(r[c].mean,r[c].sd,t.covA,t.covB)]}),o=l(n[t.key].offset);s.append("g").attr("transform","translate(50,0)").append("rect").attr("rx",2).attr("ry",2).attr("x",o).attr("y",u).attr("width",l(n[t.key].chrSize)).attr("height",20).style("fill","#FF2400AF").style("fill-opacity",.1),s.append("g").attr("transform","translate(50,0)").selectAll("line").data(a).enter().append("line").attr("class",t.key).style("stroke",function(t){return t[1]}).attr("chrGroup",t.key).attr("value",function(t){return t[0]}).attr("x1",function(t){return o+l(t[0])}).attr("y1",function(t){return u}).attr("x2",function(t){return o+l(t[0])}).attr("y2",function(t){return u+20})})}),t(y[0],0),Object(p.a)("#saveHeatMap").on("click",function(){A('<svg height="500" width="1000">'+w(s.node())+"</svg>","heatmap.svg")}),Object(p.a)("#saveScatter").on("click",function(){A('<svg height="500" width="1000">'+w(Object(p.a)(c.current).node())+"</svg>","scatterplot.svg")})}},[e]),r.a.createElement("div",null,r.a.createElement("div",{className:"actionPanel"},r.a.createElement("button",{className:"saveBtn",id:"saveHeatMap"},"Export Heatmap"),r.a.createElement("button",{className:"saveBtn",id:"saveScatter"},"Export ScatterPlot")),r.a.createElement("div",{className:"ggContainer"},r.a.createElement("svg",{className:"GGLinear",width:x+k+b,height:C,ref:a})),r.a.createElement("h3",null,y),r.a.createElement("div",{className:"ggContainer"},r.a.createElement("svg",{className:"GGDot",width:x+k+b,height:"400",ref:c})))};function F(t){return{sample:t.sample,group:t.group,pos:+t.pos,covA:parseFloat(t.covA),covB:parseFloat(t.covB)}}var B=function(){var t=Object(n.useState)(null),e=Object(o.a)(t,2),a=e[0],c=e[1];return Object(n.useEffect)(function(){document.getElementById("file_input").addEventListener("change",function(t){var e=t.target.files[0],a=new FileReader;a.onload=function(t){console.log(t.target.result),Object(s.a)(t.target.result,F).then(function(t){c(t)})},a.readAsDataURL(e)},!1)},[]),r.a.createElement("div",null,r.a.createElement("input",{type:"file",id:"file_input",accept:".csv"}),r.a.createElement(S,{data:a}))},z=function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"header"},"heviewer"),r.a.createElement("div",{className:"heContainer"},r.a.createElement(B,null)))},C=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,57)).then(function(e){var a=e.getCLS,n=e.getFID,r=e.getFCP,c=e.getLCP,l=e.getTTFB;a(t),n(t),r(t),c(t),l(t)})};l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(z,null)),document.getElementById("root")),C()},6:function(t,e,a){}},[[14,1,2]]]);
//# sourceMappingURL=main.a80ecd1d.chunk.js.map